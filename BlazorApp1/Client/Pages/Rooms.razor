@page "/rooms"
@page "/rooms/{RoomNumber}"
@using BlazorApp1.Shared.Models

<h3>Rooms</h3>

<ul>
    @foreach (Room r in rooms)
    {
        <li>
            @r.Name
            @if (r.Description != null)
            {
                <span>(@r.Description)</span>
            }
        </li>
    }
</ul>

<button type="button" @onclick="@ToggleNewRoomInterface" hidden="@showNewRoomUI">New Room</button>

@if (showNewRoomUI)
{
    <EditForm Model="@newRoom" OnValidSubmit="AddNewRoom" OnInvalidSubmit="InvalidSubmit">
        <div class="form-group">
            @if (ErrorMessage != null && ErrorMessage.Length > 0)
            {
                <div class="alert alert-warning" role="alert">
                    @ErrorMessage
                </div>
            }
            <DataAnnotationsValidator />
            <ValidationSummary />

            <div class="form-group row">
                <label for="newName" class="col-sm-3">This one:</label>
                <InputText id="newName" class="form-control col-sm-8" @bind-Value="@newRoom.Name" />
            </div>

            <div class="form-group row">
                <label for="maxCapacity" class="col-sm-3">Maximum Capacity:</label>
                <InputNumber id="maxCapacity" class="form-control col-sm-8" @bind-Value="@newRoom.MaxCapacity" />
            </div>

            <div class="form-group row">
                <label for="description" class="col-sm-3">Description:</label>
                <InputTextArea id="description" class="form-control col-sm-8" @bind-Value="@newRoom.Description" />
            </div>

            <div class="form-group">
                <button class="btn btn-warning" type="submit">Save</button>
            </div>

        </div>
    </EditForm>
}
